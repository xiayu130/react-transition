{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./src/v2.5/Transition.tsx","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./src/v2.5/Transitions.tsx","webpack:///./src/index.ts","webpack:///./src/v2.5/Flip.tsx","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/util/uuid.ts","webpack:///./src/v2.5/Flips.tsx","webpack:///./src/v2.5/Observer.tsx"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","_typeof","_getRequireWildcardCache","WeakMap","cache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","set","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","configurable","writable","STATUS","noop","props","duration","delay","animation","unmount","onUnmounted","onEntered","onEntering","onLeaveed","onLeaveing","leaveDisplayNone","appear","children","useState","_animation","setAnimation","status","setStatus","interval","setIntervalTime","firstMount","useRef","prevClassNames","className","prevStyle","style","id","timers","Set","rAF","requestAnimationFrame","useContext","TransitionsContext","prefix","animations","collection","waitForTransitionStart","callback","setTimeout","waitTransition","useEffect","current","forEach","timer","clearTimeout","clear","transitionDelay","add","_onLeaveed","handleLeaveed","transitionDuration","leave","handleLeaveing","handleEntered","enter","handleEntering","currentId","push","useMemo","classPrefix","nextStyle","display","nextClassName","React","cloneElement","Children","only","arrayLikeToArray","minLen","toString","slice","constructor","Array","from","test","len","length","arr2","createContext","masterSwitch","setAnimations","_collection","ids","reverse","counter","Provider","getRect","ele","getBoundingClientRect","getParent","el","parentNode","inOutDuration","_inOutDuration","_name","selfRef","prevRectRef","_reflowRef","_runing","relativeRect","parent","child","parentRect","rect","x","y","useLayoutEffect","flipEle","moveClass","nextRect","prevRect","transform","webkitTransform","document","body","offsetHeight","trim","classList","addEventListener","cb","e","target","propertyName","removeEventListener","remove","removeAttribute","removeClass","ref","force","iterator","isArray","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","TypeError","arrayWithoutHoles","iterableToArray","nonIterableSpread","iter","buf","Uint32Array","crypto","getRandomValues","idx","replace","wrap","wrapClass","_children","handleLeave","setChildren","prevChildren","getMap","map","isValidElement","nextChildren","prevChildrenMap","nextChildrenMap","prev","getValueForKey","nextKeysPending","pendingKeys","prevKey","childMapping","nextKey","pendingNextKey","mergeMap","keys","hasKeyByNew","hasKeyByPrev","isNew","isDelete","isNeverChange","prevProps","_onLeave","initChildren","ChildNode","values","WrapChildNode","createElement"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-flip-transition\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"react-flip-transition\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import React, {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useContext,\n} from 'react';\nimport { TransitionsContext } from './Transitions';\nimport uuid from '../util/uuid';\n\n// unmounted -> leaveed -> entering -> entered -> leaveing -> leaveed -> unmounted\n// unmounted组件卸载状态\nconst noop = () => {};\n\nexport enum STATUS {\n  UNMOUNTED = 'unmounted', // 卸载\n  ENTERED = 'entered', // 显示状态\n  ENTERING = 'entering', // 进入时的状态，从LEAVEED态过渡到ENTERED态\n  LEAVEED = 'leaveed', // 离开状态\n  LEAVEING = 'leaveing', // 离开时的状态，从ENTERED态过渡LEAVEED态\n};\n\nexport type TransitionDuration = {\n  enter: number; // entering的过渡时间\n  leave: number; // leaveing的过渡时间\n};\n\nexport interface TransitionProps {\n  name?: string; // 过渡类的前缀\n  duration?: number | TransitionDuration; // 状态的过渡时间\n  delay?: number; // 延迟时间，进入entering，leaveing前的时间\n  animation?: boolean; // 过渡的开关\n  unmount?: boolean; // 是否在leaveed态之后卸载组件\n  onUnmounted?: () => void; // 卸载组件时的事件\n  onEntered?: () => void; // 进入entered时的事件\n  onEntering?: () => void; // 进入entering时的事件\n  onLeaveed?: () => void; // 进入leaveed时的事件\n  onLeaveing?: () => void; // 进入leaveing时的事件\n  // display的开关，直接在样式中设置display可能会造成过渡失败\n  // 开始display后，LEAVEED时会添加display: none的style\n  leaveDisplayNone?: boolean;\n  children: React.ReactElement;\n  appear?: boolean;\n};\n\ntype waitForTransitionStartCallback = (...args: any[]) => any;\n\nconst durationDefaults = 200;\nconst delayDefaults = 0;\n\nconst Transition: React.FC<TransitionProps> = (props) => {\n  const {\n    name = 'r',\n    duration = durationDefaults,\n    delay = delayDefaults,\n    animation = false,\n    unmount = false,\n    onUnmounted = noop,\n    onEntered = noop,\n    onEntering = noop,\n    onLeaveed = noop,\n    onLeaveing = noop,\n    leaveDisplayNone = false,\n    appear = false,\n    children,\n  } = props;\n\n  // 动画的开关\n  const [_animation, setAnimation] = useState<boolean>(animation);\n  // 动画的状态\n  const [status, setStatus] = useState<STATUS>(() => {\n    if (_animation) {\n      if (appear) {\n        return STATUS['ENTERED'];\n      } else {\n        return STATUS['LEAVEED'];\n      }\n    } else {\n      if (unmount) {\n        return STATUS['UNMOUNTED'];\n      } else {\n        return STATUS['LEAVEED'];\n      }\n    }\n  });\n  // 间隔渲染，主要用在一组动画中，默认为0\n  const [interval, setIntervalTime] = useState<number>(0);\n  // 是否为初次渲染\n  const firstMount = useRef(true);\n  // 最初元素的classNames\n  const prevClassNames = useRef(children.props.className || '');\n  // 最初元素的styles\n  const prevStyle = useRef(children.props.style || '');\n  // 当前动画组件的唯一id\n  const id = useRef(uuid());\n  const timers = useRef(new Set<NodeJS.Timeout>([]));\n  const rAF = typeof window !== 'undefined' && window.requestAnimationFrame;\n  const {\n    prefix,\n    animations,\n    collection,\n  } = useContext(TransitionsContext);\n\n  /**\n   * 等待浏览器渲染完成\n   */\n  const waitForTransitionStart = rAF ? (callback: waitForTransitionStartCallback) => {\n    rAF(() => {\n      rAF(callback);\n    })\n  } : (callback: waitForTransitionStartCallback) => {\n    setTimeout(callback, 50);\n  };\n\n  /**\n   * 等待动画过渡完成后，执行回调\n   */\n  const waitTransition = (\n    duration: number,\n    callback: waitForTransitionStartCallback\n  ) => {\n    const timer = setTimeout(callback, duration);\n    return timer;\n  };\n\n  /**\n   * 处理STATUS['UNMOUNTED']状态\n   */\n  const handleUnmounted = () => {\n    if (!firstMount.current) {\n      // 初次渲染时不触发onUnmounted钩子\n      onUnmounted();\n    }\n    if (_animation) {\n      // 如果是STATUS['UNMOUNTED']状态，并且animation为true。\n      // 我们需要先将状态设置为STATUS['LEAVEED']态\n      setStatus(STATUS['LEAVEED']);\n    } else {\n    }\n  };\n\n  /**\n   * 处理STATUS['LEAVEED']状态\n   */\n  const handleLeaveed = () => {\n    if (_animation) {\n      // 如果开关为开，当前是STATUS['LEAVEED']态，我们下一步需要进入到STATUS['ENTERING']态\n      // 使用waitForTransitionStart，等待浏览器渲染完成\n      waitForTransitionStart(() => {\n        // 如果有延迟，需要等待延迟进入ENTERING态\n        let transitionDelay = delay;\n        transitionDelay += interval;\n        const timer = waitTransition(transitionDelay, () => {\n          setStatus(STATUS['ENTERING']);\n        });\n        timers.current.add(timer);\n      });\n    } else {\n      // 触发leaveed的钩子，只有在真正离开的状态才触发，unmounted -> leaveed状态时不触发\n      onLeaveed()\n      // Observer注入的监听事件\n      const { _onLeaveed } = props as any;\n      if (_onLeaveed) {\n        _onLeaveed();\n      }\n      // 如果开关为关。并且unmount设置为true，需要将状态设置为STATUS['UNMOUNTED']\n      if (unmount) {\n        setStatus(STATUS['UNMOUNTED']);\n      }\n    }\n  };\n\n  /**\n   * 处理STATUS['LEAVEING']状态\n   */\n  const handleLeaveing = () => {\n    // 触发leaveing钩子\n    onLeaveing();\n    if (_animation) {\n      // 如果开关为开，下一步需要过渡到STATUS['ENTERING']状态\n      let transitionDelay = delay;\n      transitionDelay += interval;\n      const timer = waitTransition(transitionDelay, () => {\n        setStatus(STATUS['ENTERING']);\n      });\n      timers.current.add(timer);\n    } else {\n      // 如果开关为关，下一步需要进入等待过渡完成后进入，STATUS['LEAVEED']状态\n      let transitionDuration = typeof duration === 'number' ? duration : duration.leave;\n      const timer = waitTransition(transitionDuration, () => {\n        setStatus(STATUS['LEAVEED']);\n      });\n      timers.current.add(timer);\n    }\n  };\n\n  /**\n   * 处理STATUS['ENTERED']状态\n   */\n  const handleEntered = () => {\n    // 触发onEntered的钩子\n    onEntered();\n    if (_animation) {\n      // 如果开关为开，不处理\n    } else {\n      // 如果开关为关，需要进入到['LEAVEING']状态\n      let transitionDelay = delay;\n      transitionDelay += interval;\n      const timer = waitTransition(transitionDelay, () => {\n        setStatus(STATUS['LEAVEING']);\n      });\n      timers.current.add(timer);\n    }\n  };\n\n  /**\n   * 处理STATUS['ENTERING']状态\n   */\n  const handleEntering = () => {\n    // 触发onEntering钩子\n    onEntering();\n    if (_animation) {\n      // 如果动画开关为开，等待过渡完成后进入STATUS['ENTERED']状态\n      let transitionDuration = typeof duration === 'number' ? duration : duration.enter;\n      const timer = waitTransition(transitionDuration, () => {\n        setStatus(STATUS['ENTERED']);\n      });\n      timers.current.add(timer);\n    } else {\n      // 如果动画开关为关，需要进入到STATUS['LEAVEING']\n      let transitionDelay = delay;\n      transitionDelay += interval;\n      const timer = waitTransition(transitionDelay, () => {\n        setStatus(STATUS['LEAVEING']);\n      });\n      timers.current.add(timer);\n    }\n  };\n\n  useEffect(() => {\n    timers.current.forEach((timer) => {\n      clearTimeout(timer);\n    });\n    timers.current.clear();\n    switch (status) {\n      case STATUS['UNMOUNTED']:\n        handleUnmounted();\n        break;\n      case STATUS['LEAVEED']:\n        handleLeaveed();\n        break;\n      case STATUS['LEAVEING']:\n        handleLeaveing();\n        break;\n      case STATUS['ENTERED']:\n        handleEntered();\n        break;\n      case STATUS['ENTERING']:\n        handleEntering();\n        break;\n    }\n    // 标记为不是初次渲染\n    firstMount.current = false;\n  }, [status, _animation]);\n\n  useEffect(() => {\n    const currentId = id.current;\n    if (animations[currentId]) {\n      const {\n        animation,\n        delay,\n      } = animations[currentId];\n      setIntervalTime(delay);\n      setAnimation(animation);\n    }\n  }, [animations]);\n\n  useEffect(() => {\n    setAnimation(animation);\n  }, [animation]);\n\n\n  useEffect(() => {\n    if (collection) {\n      collection.push(id.current);\n    }\n  }, []);\n\n  const className = useMemo(() => {\n    const classPrefix = prefix ? prefix : name;\n    switch (status) {\n      case STATUS['LEAVEED']:\n        return `${classPrefix}-leaveed`;\n      case STATUS['LEAVEING']:\n        return `${classPrefix}-leaveing`;\n      case STATUS['ENTERED']:\n        return `${classPrefix}-entered`;\n      case STATUS['ENTERING']:\n        return `${classPrefix}-entering`;\n    }\n  }, [status, prefix, name]);\n\n  const nextStyle = useMemo(() => {\n    if (status === STATUS['LEAVEED'] && leaveDisplayNone && !_animation) {\n      return {\n        display: 'none',\n      };\n    }\n    return null;\n  }, [leaveDisplayNone, status, _animation]);\n\n  if (status === STATUS['UNMOUNTED']) {\n    return null;\n  }\n\n  const nextClassName = prevClassNames.current ?\n    `${className} ${prevClassNames.current}`\n    : `${className}`;\n\n  return React.cloneElement(React.Children.only(children), {\n    className: nextClassName,\n    style: {\n      ...prevStyle.current,\n      ...nextStyle,\n    },\n  });\n};\n\nexport default Transition;\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","import React, {\n  useEffect,\n  useState,\n  useRef,\n} from 'react';\n\nexport interface TransitionsProps {\n  masterSwitch?: boolean; // 统一的动画开关(会对所有children的animation做设置)\n  interval?: number; // 每一个动画之间的时间间隔\n  prefix: string;\n}\n\nexport type Animations = {\n  [key: string]: {\n    delay: number;\n    animation: boolean;\n  },\n};\n\nexport const TransitionsContext = React.createContext<{\n  animations: Animations,\n  collection: string[];\n  prefix: string;\n}>({\n  animations: {},\n  collection: [],\n  prefix: '',\n});\n\nconst Transitions: React.FC<TransitionsProps> = (props) => {\n  const {\n    masterSwitch = false,\n    interval = 200,\n    prefix = '',\n    children,\n  } = props;\n\n  const [animations, setAnimations] = useState<Animations>({});\n  const collection = useRef<string[]>([]);\n\n  useEffect(() => {\n    const _collection = [...collection.current];\n    const ids = masterSwitch ? _collection : _collection.reverse();\n    const animations: Animations = {};\n    let counter = 0;\n    ids.forEach((id) => {\n      animations[id] = {\n        delay: counter * interval,\n        animation: masterSwitch,\n      };\n      counter += 1;\n    });\n    setAnimations(animations);\n  }, [masterSwitch, interval]);\n\n  return (\n    <TransitionsContext.Provider value={{\n      animations,\n      collection: collection.current,\n      prefix,\n    }}>\n      { children }\n    </TransitionsContext.Provider>\n  )\n};\n\nexport default Transitions;\n","export { default as Flip } from './v2.5/Flip';\nexport { default as Flips } from './v2.5/Flips';\nexport { default as Observer } from './v2.5/Observer';\nexport { default as Transition } from './v2.5/Transition';\nexport { default as Transitions } from './v2.5/Transitions';\n","import * as React from 'react';\nimport {\n  useRef,\n  useLayoutEffect,\n} from 'react';\nimport Transition from './Transition';\n\nconst getRect = (ele: HTMLElement): DOMRect => {\n  return ele.getBoundingClientRect();\n};\n\nconst getParent = (el: HTMLElement): HTMLElement => {\n  return el.parentNode as HTMLElement;\n};\n\nexport interface FLIPProps {\n  children: React.ReactElement;\n}\n\nconst FLIP: React.FC<FLIPProps> = (props) => {\n  const {\n    children,\n  } = props;\n\n  const {\n    _inOutDuration: inOutDuration, // 离开，进入的过渡时长，需要和class中transtion一致\n    _animation: animation, // 离开，进入动画的开关\n    _onLeaveed: onLeaveed,\n    _name: name, // class的前缀\n  } = props as any;\n\n  const selfRef = useRef<HTMLElement>();\n  const prevRectRef = useRef<DOMRect>();\n  const _reflowRef = useRef<number>();\n  const _runing = useRef<boolean>(false);\n\n  // 强制重绘\n  const reflow = () => {\n    _reflowRef.current = document.body.offsetHeight;\n  };\n\n  // 获取相对的rect\n  const relativeRect = (parent: HTMLElement, child: HTMLElement): DOMRect => {\n    const parentRect = getRect(parent);\n    const rect = getRect(child);\n    rect.x = parentRect.x - rect.x;\n    rect.y = parentRect.y - rect.y;\n    return rect;\n  };\n\n  // 终止transition过渡，并保存当前的位置\n  const finish = () => {\n    const flipEle = selfRef.current;\n    if (flipEle) {\n      const s = flipEle.style;\n      const computedStyle = window.getComputedStyle(flipEle);\n      s.transitionDuration = '0s';\n      s.transform = s.webkitTransform = computedStyle.transform;\n    }\n  };\n\n  const addClass = (ele: HTMLElement, className: string): void => {\n    if (!className || !(className = className.trim())) {\n      return;\n    }\n    ele.classList.add(className);\n  };\n\n  const removeClass = (ele: HTMLElement, className: string): void => {\n    if (!className || !(className = className.trim())) {\n      return;\n    }\n    ele.classList.remove(className);\n    if (!ele.classList.length) {\n      ele.removeAttribute('class');\n    }\n  };\n\n  const force = () => {\n    const flipEle = selfRef.current;\n    if (flipEle) {\n      const parent = getParent(flipEle);\n      const rect = relativeRect(parent, flipEle);\n      prevRectRef.current = rect;\n      // 这里可以增加一个停止css动画，并保存当前动画的位置（Vue这块没有做处理，可能并不重要）\n      if (_runing.current) {\n        // finish();\n      }\n    }\n  };\n\n  useLayoutEffect(() => {\n    const flipEle = selfRef.current\n    if (flipEle && prevRectRef.current) {\n      const moveClass = `${name}-move`;\n      const parent = getParent(flipEle);\n      const nextRect = relativeRect(parent, flipEle);\n      const prevRect = prevRectRef.current;\n      const x = nextRect.x - prevRect.x;\n      const y = nextRect.y - prevRect.y;\n      // 没有变化就不进行处理\n      if (x === 0 && y === 0) {\n        return;\n      }\n      const s = flipEle.style;\n      s.transform = s.webkitTransform = `translate(${x}px,${y}px)`;\n      s.transitionDuration = '0s';\n      // 强制重绘\n      reflow();\n      // 添加move类\n      addClass(flipEle, moveClass);\n      s.transform = s.webkitTransform = s.transitionDuration = '';\n      _runing.current = true;\n      // 监听transition事件\n      flipEle.addEventListener('transitionend', function cb (e) {\n        if (e && e.target !== flipEle) {\n          return\n        }\n        if (!e || /transform$/.test(e.propertyName)) {\n          flipEle.removeEventListener('transitionend', cb);\n          _runing.current = false;\n          // 删除move类\n          removeClass(flipEle, moveClass);\n        }\n      });\n    }\n  });\n\n  const child = React.cloneElement(React.Children.only(children), {\n    ref: selfRef\n  });\n\n  force();\n\n  return (\n    <Transition\n      name={name}\n      animation={animation}\n      onLeaveed={onLeaveed}\n      duration={inOutDuration}\n      unmount={true}\n    >\n      { child }\n    </Transition>\n  );\n};\n\nexport default FLIP;\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","// https://stackoverflow.com/questions/105034/how-to-create-guid-uuid\nconst uuid = (): string => {\n  const buf = new Uint32Array(4);\n  window.crypto.getRandomValues(buf);\n  let idx = -1;\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    idx++;\n    const r = (buf[idx>>3] >> ((idx%8)*4))&15;\n    const v = c == 'x' ? r : (r&0x3|0x8);\n    return v.toString(16);\n  });\n}\n\nexport default uuid;\n","import * as React from 'react';\nimport {\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\nimport {\n  ChildrenMap\n} from './Observer';\n\ninterface FLIPSProps {\n  inOutDuration?: number; // 非flip动画的过渡时间，比如离开和进入的过渡时间\n  wrap?: string | false; // 是否添加一层包裹\n  wrapClass?: string; // 包裹的class名称\n  name?: string; // 添加类名的前缀\n}\n\nconst FLIPS: React.FC<FLIPSProps> = (props) => {\n\n  const {\n    inOutDuration = 200,\n    wrap = 'div',\n    wrapClass = '',\n    name = 'r',\n    children: _children,\n  } = props;\n\n  const handleLeave = (key: React.ReactText) => {\n    setChildren((prevChildren) => {\n      if (key in prevChildren) {\n        delete prevChildren[key];\n      }\n      return { ...prevChildren };\n    });\n  };\n\n  const mergeMap = (prev: ChildrenMap, next: ChildrenMap): ChildrenMap => {\n    prev = prev || {};\n    next = next || {};\n    function getValueForKey(key: React.ReactText) {\n      return key in next ? next[key] : prev[key];\n    }\n    let nextKeysPending = Object.create(null);\n    let pendingKeys = [];\n    for (let prevKey in prev) {\n      if (prevKey in next) {\n        if (pendingKeys.length) {\n          nextKeysPending[prevKey] = pendingKeys;\n          pendingKeys = [];\n        }\n      } else {\n        pendingKeys.push(prevKey);\n      }\n    }\n    let i;\n    let childMapping: ChildrenMap = {};\n    for (let nextKey in next) {\n      if (nextKeysPending[nextKey]) {\n        for (i = 0; i < nextKeysPending[nextKey].length; i++) {\n          let pendingNextKey = nextKeysPending[nextKey][i];\n          childMapping[pendingNextKey] = getValueForKey(\n            pendingNextKey\n          );\n        }\n      }\n      childMapping[nextKey] = getValueForKey(nextKey);\n    }\n    for (i = 0; i < pendingKeys.length; i++) {\n      childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n    }\n    return childMapping;\n  };\n\n  const getMap = (\n    children: React.ReactNode,\n    callback?: (child: React.ReactNode) => React.ReactNode\n  ): ChildrenMap => {\n    const map = Object.create(null);\n    if (children) {\n      // 如果没有手动添加key, React.Children.map会自动添加key\n      React.Children.map(children, c => c)?.forEach((child) => {\n        const key = (child as React.ReactElement).key || '';\n        if (key) {\n          if (React.isValidElement(child) && callback) {\n            map[key] = callback(child);\n          } else {\n            map[key] = child;\n          }\n        }\n      });\n    }\n    return map;\n  };\n\n  const initChildren = (\n    children: React.ReactNode,\n  ): ChildrenMap => {\n    return getMap(children, (child) => {\n      return React.cloneElement(child as React.ReactElement, {\n        _inOutDuration: inOutDuration,\n        _name: name,\n        _animation: true,\n        _onLeave: () => {\n          const key = (child as React.ReactElement).key || '';\n          handleLeave(key);\n        },\n      });\n    });\n  };\n\n  const nextChildren = (\n    nextChildren: React.ReactNode,\n    prevChildrenMap: ChildrenMap,\n  ): ChildrenMap => {\n    const nextChildrenMap = getMap(nextChildren);\n    const children = mergeMap(prevChildrenMap, nextChildrenMap);\n    Object.keys(children).forEach(key => {\n      const child = children[key];\n      if (!React.isValidElement(child)) {\n        return;\n      }\n      const hasKeyByNew = nextChildrenMap[key] !== undefined;\n      const hasKeyByPrev = prevChildrenMap[key] !== undefined;\n      const isNew = hasKeyByNew && !hasKeyByPrev;\n      const isDelete = !hasKeyByNew && hasKeyByPrev;\n      const isNeverChange = hasKeyByNew && hasKeyByPrev;\n      const prevProps = ((prevChildrenMap[key] as React.ReactElement)?.props as any);\n      if (isNew) {\n        children[key] = React.cloneElement(child, {\n          _name: name,\n          _inOutDuration: inOutDuration,\n          _animation: true,\n          _onLeave: () => {\n            const key = (child as React.ReactElement).key || '';\n            handleLeave(key);\n          },\n        });\n      } else if (isDelete) {\n        children[key] = React.cloneElement(child, {\n          _animation: false,\n        });\n      } else if (isNeverChange) {\n        children[key] = React.cloneElement(child, {\n          _animation: prevProps._animation,\n          _inOutDuration: prevProps._inOutDuration,\n          _name: prevProps._name,\n          _onLeave: () => {\n            const key = (child as React.ReactElement).key || '';\n            handleLeave(key);\n          },\n        });\n      }\n    });\n    return children;\n  };\n\n  const firstMount = useRef<boolean>(true);\n  const [children, setChildren] = useState<ChildrenMap>(() => {\n    return initChildren(_children);\n  });\n\n  useEffect(() => {\n    if (!firstMount.current) {\n      setChildren(nextChildren(_children, children));\n    } else {\n      firstMount.current = false;\n    }\n  }, [_children]);\n\n  const ChildNode = Object.values(children);\n\n  if (wrap) {\n    const WrapChildNode = React.createElement(wrap, {\n      className: wrapClass,\n    }, ChildNode);\n\n    return (\n      <>\n        { WrapChildNode }\n      </>\n    );\n  }\n\n  return (\n    <>\n      { ChildNode }\n    </>\n  );\n}\n\nexport default FLIPS;\n","import * as React from 'react';\nimport {\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\nimport {\n  TransitionProps,\n} from './Transition';\n\ninterface ObserverProps {\n  wrap?: string;\n  wrapClass?: string;\n  children?: any;\n}\n\nexport type ChildrenMap = {\n  [key: string]: React.ReactNode\n};\n\nconst Observer: React.FC<ObserverProps> = (props) => {\n\n  const {\n    children: _children,\n    wrap = '',\n    wrapClass = '',\n  } = props;\n\n  const mergeMap = (prev: ChildrenMap, next: ChildrenMap): ChildrenMap => {\n    prev = prev || {};\n    next = next || {};\n    function getValueForKey(key: React.ReactText) {\n      return key in next ? next[key] : prev[key];\n    }\n    let nextKeysPending = Object.create(null);\n    let pendingKeys = [];\n    for (let prevKey in prev) {\n      if (prevKey in next) {\n        if (pendingKeys.length) {\n          nextKeysPending[prevKey] = pendingKeys;\n          pendingKeys = [];\n        }\n      } else {\n        pendingKeys.push(prevKey);\n      }\n    }\n    let i;\n    let childMapping: ChildrenMap = {};\n    for (let nextKey in next) {\n      if (nextKeysPending[nextKey]) {\n        for (i = 0; i < nextKeysPending[nextKey].length; i++) {\n          let pendingNextKey = nextKeysPending[nextKey][i];\n          childMapping[pendingNextKey] = getValueForKey(\n            pendingNextKey\n          );\n        }\n      }\n      childMapping[nextKey] = getValueForKey(nextKey);\n    }\n    for (i = 0; i < pendingKeys.length; i++) {\n      childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n    }\n    return childMapping;\n  };\n\n  const getMap = (\n    children: React.ReactNode,\n    callback?: (child: React.ReactNode) => React.ReactNode\n  ): ChildrenMap => {\n    const map = Object.create(null);\n    if (children) {\n      // 如果没有手动添加key, React.Children.map会自动添加key\n      React.Children.map(children, c => c)?.forEach((child) => {\n        const key = (child as React.ReactElement).key || '';\n        if (key) {\n          if (React.isValidElement(child) && callback) {\n            map[key] = callback(child);\n          } else {\n            map[key] = child;\n          }\n        }\n      });\n    }\n    return map;\n  };\n\n  const initChildren = (\n    children: React.ReactNode,\n  ): ChildrenMap => {\n    return getMap(children, (child) => {\n      return React.cloneElement(child as React.ReactElement, {\n        animation: true,\n        _onLeaveed: () => {\n          const key = (child as React.ReactElement).key || '';\n          handleLeave(key);\n        },\n      });\n    });\n  };\n\n  const nextChildren = (\n    nextChildren: React.ReactNode,\n    prevChildrenMap: ChildrenMap,\n  ): ChildrenMap => {\n    const nextChildrenMap = getMap(nextChildren);\n    const children = mergeMap(prevChildrenMap, nextChildrenMap);\n    Object.keys(children).forEach(key => {\n      const child = children[key];\n      if (!React.isValidElement(child)) {\n        return;\n      }\n      const hasKeyByNew = nextChildrenMap[key] !== undefined;\n      const hasKeyByPrev = prevChildrenMap[key] !== undefined;\n      const isNew = hasKeyByNew && !hasKeyByPrev;\n      const isDelete = !hasKeyByNew && hasKeyByPrev;\n      const isNeverChange = hasKeyByNew && hasKeyByPrev;\n      const prevProps = ((prevChildrenMap[key] as React.ReactElement)?.props as TransitionProps);\n      if (isNew) {\n        children[key] = React.cloneElement(child, {\n          animation: true,\n          _onLeaveed: () => {\n            const key = (child as React.ReactElement).key || '';\n            handleLeave(key);\n          },\n        });\n      } else if (isDelete) {\n        children[key] = React.cloneElement(child, {\n          animation: false,\n        });\n      } else if (isNeverChange) {\n        children[key] = React.cloneElement(child, {\n          animation: prevProps.animation,\n          _onLeaveed: () => {\n            const key = (child as React.ReactElement).key || '';\n            handleLeave(key);\n          },\n        });\n      }\n    });\n    return children;\n  };\n\n  const handleLeave = (key: React.ReactText) => {\n    setChildren((prevChildren) => {\n      if (key in prevChildren) {\n        delete prevChildren[key];\n      }\n      return { ...prevChildren };\n    });\n  };\n\n  const firstMount = useRef<boolean>(true);\n  const [children, setChildren] = useState<ChildrenMap>(() => {\n    return initChildren(_children);\n  });\n\n  useEffect(() => {\n    if (!firstMount.current) {\n      setChildren(nextChildren(_children, children));\n    }\n    firstMount.current = false;\n  }, [_children]);\n\n  const ChildNode = Object.values(children);\n\n  if (wrap) {\n    const WrapChildNode = React.createElement(wrap, {\n      className: wrapClass,\n    }, ChildNode);\n\n    return (\n      <>\n        { WrapChildNode }\n      </>\n    );\n  }\n\n  return (\n    <>\n      { ChildNode }\n    </>\n  );\n}\n\nexport default Observer;\n"],"sourceRoot":""}